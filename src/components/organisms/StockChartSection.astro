---
/**
 * StockChartSection.astro - Interactive intraday chart and quick stats
 */
import type { StockWithDetails, PriceHistoryRecord } from '../../types/stock';
import TemporalPriceChart from '../molecules/TemporalPriceChart.astro';
import CoreMetricMatrix from '../molecules/CoreMetricMatrix.astro';
import InstitutionalRatingCard from '../molecules/InstitutionalRatingCard.astro';

interface Props {
    stock: StockWithDetails;
    priceData?: PriceHistoryRecord[];
}

const { stock, priceData = [] } = Astro.props;
---

<div
    class="grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8 animate-fade-up"
    style="animation-delay: 150ms"
>
    <!-- Main: Price Chart -->
    <TemporalPriceChart change={stock.change} symbol={stock.symbol} priceData={priceData} />

    <!-- Side: Quick Stats Matrix -->
    <div class="lg:col-span-4 space-y-6">
        <CoreMetricMatrix
            open={stock.open}
            volume={stock.volume}
            high={stock.high}
            low={stock.low}
        />

        <InstitutionalRatingCard pe={stock.pe} yield={stock.yield} />
    </div>
</div>

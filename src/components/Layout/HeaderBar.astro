---
/**
 * é ‚éƒ¨Headeræ¬„çµ„ä»¶ - æ¥µç°¡ç‰ˆ
 */
---

<header class="header-bar" id="header-bar">
    <div class="header-left">
        <!-- ç©ºé–“ä¿ç•™ -->
    </div>

    <div class="header-right">
        <!-- é€šçŸ¥éˆ´ - æ”¹ç‚ºé»æ“Šå¾Œè§¸ç™¼æ°£æ³¡é€šçŸ¥ -->
        <div class="notifications-wrapper">
            <button class="header-btn" id="notifications-btn" title="ç³»çµ±é€šçŸ¥" aria-label="é€šçŸ¥">
                ğŸ””
                <span class="badge" id="notification-badge">3</span>
            </button>
        </div>
    </div>
</header>

<style>
    .header-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 40px; /* å£“ç¸®é«˜åº¦ */
        background: transparent;
        border-bottom: 1px solid var(--c-border);
        padding: 0 20px;
        position: sticky;
        top: 0;
        z-index: 90;
        backdrop-filter: var(--glass-blur);
    }

    .header-right {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .header-btn {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--c-border);
        border-radius: 6px;
        color: var(--c-text-secondary);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
        position: relative;
    }

    .header-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--c-accent);
        border-color: var(--c-accent);
    }

    .badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: var(--c-danger);
        color: white;
        font-size: 8px;
        font-weight: 800;
        padding: 1px 4px;
        border-radius: 10px;
        min-width: 14px;
        text-align: center;
        box-shadow: 0 0 10px rgba(244, 63, 94, 0.4);
    }

    @media (max-width: 768px) {
        .header-bar {
            height: 36px;
        }
    }
</style>

<script>
    import { toast } from '../../lib/toast';

    const notificationsBtn = document.getElementById('notifications-btn');
    const badge = document.getElementById('notification-badge');

    const sampleNotifications = [
        { id: 1, title: 'ğŸš€ æ•¸æ“šæ›´æ–°æˆåŠŸ', message: 'å°è‚¡å³æ™‚æˆäº¤æ¸…å–®å·²åŒæ­¥' },
        { id: 2, title: 'âš ï¸ é è­¦é€šçŸ¥', message: 'æ‚¨çš„è‡ªé¸è‚¡ 2330 çªç ´æ”¯æ’ä½' },
        { id: 3, title: 'âœ… çµ„åˆèª¿æ•´', message: 'æŠ•è³‡çµ„åˆæ¯”ä¾‹å·²é‡æ–°è¨ˆç®—' },
    ];

    notificationsBtn?.addEventListener('click', () => {
        // é»æ“Šå¾Œé€å€‹é¡¯ç¤ºé€šçŸ¥ï¼Œä¸¦æ¸›å°‘æ¨™è¨˜æ•¸é‡
        if (sampleNotifications.length > 0) {
            const notice = sampleNotifications.shift();
            if (notice) {
                toast.info(`${notice.title}: ${notice.message}`, 4000);
            }

            if (badge) {
                const count = sampleNotifications.length;
                if (count > 0) {
                    badge.textContent = count.toString();
                } else {
                    badge.style.display = 'none';
                }
            }
        } else {
            toast.success('ç›®å‰æ²’æœ‰æ–°é€šçŸ¥');
        }
    });

    // Listen for theme changes from sidebar to show feedback
    window.addEventListener('tw-theme-change', (e: any) => {
        const theme = e.detail;
        toast.info(`å·²åˆ‡æ›è‡³ ${theme === 'dark' ? 'æ·±è‰²' : 'äº®è‰²'} æ¨¡å¼`);
    });
</script>

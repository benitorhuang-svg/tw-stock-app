---
/**
 * DatabaseSidebarItem.astro - Atom for a single table button in the sidebar
 */
interface Props {
    name: string;
    rows: number;
    color: string;
}

const { name, rows, color } = Astro.props;
---

<li>
    <button
        class="w-full text-left px-4 py-3 rounded-xl text-[11px] font-mono text-text-secondary hover:bg-glass-hover hover:text-text-primary transition-all flex items-center justify-between group border border-transparent active:scale-[0.98]"
        data-table={name}
    >
        <div class="flex items-center gap-3 min-w-0 flex-1">
            <div
                class={`w-6 h-6 shrink-0 rounded-lg overflow-hidden flex items-center justify-center border transition-all ${
                    color === 'accent'
                        ? 'bg-accent/10 border-accent/30 group-hover:border-accent/60'
                        : color === 'green'
                          ? 'bg-emerald-500/10 border-emerald-500/30 group-hover:border-emerald-500/60'
                          : color === 'yellow'
                            ? 'bg-amber-500/10 border-amber-500/30 group-hover:border-amber-500/60'
                            : 'bg-glass border-border group-hover:border-accent/40'
                }`}
            >
                <svg
                    class={`w-3.5 h-3.5 ${
                        color === 'accent'
                            ? 'text-accent'
                            : color === 'green'
                              ? 'text-emerald-400'
                              : color === 'yellow'
                                ? 'text-amber-400'
                                : 'text-text-muted group-hover:text-accent'
                    }`}
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path
                        stroke-linecap="square"
                        stroke-linejoin="miter"
                        stroke-width="2"
                        d="M4 7v10c0 2 1 3 3 3h10c2 0 3-1 3-3V7c0-2-1-3-3-3H7C5 4 4 5 4 7zm0 0h16M4 12h16"
                    ></path>
                </svg>
            </div>
            <span class="truncate tracking-wide group-hover:translate-x-1 transition-transform">
                {name}
            </span>
        </div>
        <span
            class="text-[9px] text-text-muted shrink-0 ml-2 group-hover:text-accent font-mono transition-colors"
            data-table-count={name}
        >
            {rows > 1000 ? (rows / 1000).toFixed(1) + 'K' : rows}
        </span>
    </button>
</li>

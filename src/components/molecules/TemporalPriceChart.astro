---
/**
 * TemporalPriceChart.astro
 * Interactive price trend visualization
 */
interface Props {
    change: number;
    symbol: string;
}

const { change } = Astro.props;
---

<div class="lg:col-span-8 glass-card p-8 h-[450px] flex flex-col relative overflow-hidden group">
    <div
        class="absolute top-0 right-0 p-8 opacity-[0.02] group-hover:opacity-[0.05] transition-opacity pointer-events-none"
    >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="120"
            height="120"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            ><path d="M3 3v18h18"></path><path d="m19 9-5 5-4-4-3 3"></path></svg
        >
    </div>

    <div class="flex items-center justify-between mb-6 relative z-10">
        <div>
            <h2 class="text-[10px] font-mono font-black text-accent uppercase tracking-[0.3em]">
                Temporal Price Variance
            </h2>
            <div class="flex items-center gap-2 mt-1">
                <div class="w-1.5 h-1.5 rounded-full bg-bullish animate-pulse"></div>
                <span class="text-[9px] font-mono text-text-muted/70 uppercase tracking-widest"
                    >Live_Feed: ACTIVE</span
                >
            </div>
        </div>

        <div
            class="flex items-center gap-1 bg-surface-hover/50 p-1 rounded-xl border border-border"
        >
            {
                ['1D', '5D', '1M', '3M', '1Y'].map((t, i) => (
                    <button
                        class:list={[
                            'px-4 py-1.5 rounded-lg text-[9px] font-black font-mono transition-all',
                            i === 0
                                ? 'bg-accent text-white shadow-[0_4px_12px_rgba(59,130,246,0.3)]'
                                : 'text-text-muted/70 hover:text-text-primary hover:bg-surface-hover',
                        ]}
                    >
                        {t}
                    </button>
                ))
            }
        </div>
    </div>

    <!-- Chart area -->
    <div
        class="flex-1 relative rounded-3xl overflow-hidden border border-border/50 bg-input-bg/50"
        id="chart-area"
    >
        <div class="absolute inset-0 bg-gradient-to-b from-accent/5 to-transparent"></div>
        <!-- Grid lines -->
        <div
            class="absolute inset-0 flex flex-col justify-between py-10 pointer-events-none opacity-30"
        >
            {[...Array(6)].map(() => <div class="border-b border-border/50 w-full" />)}
        </div>
        <!-- Simulated trend line -->
        <div class="absolute inset-x-0 bottom-0 top-1/4 px-10">
            <svg
                class="w-full h-full overflow-visible"
                preserveAspectRatio="none"
                viewBox="0 0 100 100"
            >
                <path
                    d="M0 80 Q 20 20, 40 50 T 80 10 L 100 30"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    class:list={[
                        'transition-all duration-1000',
                        change >= 0 ? 'text-bullish' : 'text-bearish',
                    ]}></path>
                <path
                    d="M0 80 Q 20 20, 40 50 T 80 10 L 100 30 L 100 100 L 0 100 Z"
                    fill="url(#chart-gradient)"
                    class="opacity-10"></path>
                <defs>
                    <linearGradient id="chart-gradient" x1="0" x2="0" y1="0" y2="1">
                        <stop offset="0%" stop-color="currentColor" stop-opacity="1"></stop>
                        <stop offset="100%" stop-color="currentColor" stop-opacity="0"></stop>
                    </linearGradient>
                </defs>
            </svg>
        </div>
    </div>
</div>

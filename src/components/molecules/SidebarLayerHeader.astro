---
/**
 * SidebarLayerHeader.astro - Molecule for the collapsible header of a database layer
 */
interface Props {
    label: string;
    tag?: string;
    count: number;
    color: string;
    isExpanded?: boolean;
}

const { label, tag, count, color, isExpanded = false } = Astro.props;
---

<button
    class="w-full pt-3 pb-1 px-2 first:pt-1 flex items-center justify-between group/layer transition-colors hover:bg-surface/30 rounded-lg layer-toggle-btn"
    aria-expanded={isExpanded ? 'true' : 'false'}
>
    <div class="flex items-center gap-2">
        <span
            class={`text-[9px] font-black uppercase tracking-[0.15em] ${
                color === 'accent'
                    ? 'text-accent'
                    : color === 'green'
                      ? 'text-emerald-400'
                      : color === 'yellow'
                        ? 'text-amber-400'
                        : 'text-text-muted'
            }`}
        >
            {tag && <span>{tag} </span>}{label}
        </span>
        <span class="text-[8px] text-text-muted font-mono">
            ({count})
        </span>
    </div>
    <svg
        class="w-3 h-3 text-text-muted group-hover/layer:text-text-primary transition-transform duration-300 chevron-icon"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        style={`transform: rotate(${isExpanded ? '0' : '-90'}deg);`}
    >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"
        ></path>
    </svg>
</button>
